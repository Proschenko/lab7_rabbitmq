
# Lab7 RabbitMQ Project

## Описание

Этот проект представляет собой систему из двух приложений (производитель и потребитель), взаимодействующих через брокер сообщений RabbitMQ.  
Производитель (producer) отправляет ссылки в очередь, а потребитель (consumer) обрабатывает их, извлекая новые ссылки с указанных страниц.

## Состав проекта

- **producer.py**: собирает ссылки с указанной веб-страницы и отправляет их в очередь.
- **consumer.py**: извлекает ссылки из очереди, обрабатывает их и добавляет новые ссылки обратно в очередь.
- **clear_queue.py**: очищает очередь RabbitMQ.


## Установка

1. Убедитесь, что у вас установлен Python версии 3.8 или выше и Docker.

2. Клонируйте репозиторий на локальную машину:

   ```bash
   git clone https://github.com/Proschenko/lab7_rabbitmq.git
   cd lab7_rabbitmq
   ```

3. Установите зависимости:

   ```bash
   pip install -r requirements.txt
   ```



## Запуск RabbitMQ

1. Поднимите контейнер RabbitMQ:

   ```bash
   docker run -d --name rabbitmq -p 5672:5672 -p 15672:15672 rabbitmq:3-management
   ```

2. Веб-интерфейс RabbitMQ доступен по адресу: [http://localhost:15672](http://localhost:15672)  
   - Логин и пароль по умолчанию: `guest/guest`

## Запуск приложений

1. **Очистка очереди (опционально):**  
   Для удаления всех сообщений из очереди выполните команду:

   ```bash
   python clear_queue.py
   ```

2. **Запуск producer:**  
   Отправьте ссылки из указанного URL:

   ```bash
   python producer.py <URL>
   ```

   Пример:

   ```bash
   python producer.py https://example.com
   ```

3. **Запуск consumer:**  
   Для обработки сообщений из очереди запустите:

   ```bash
   python consumer.py
   ```

## Логика работы

1. **Producer** получает URL и извлекает с него все ссылки, отправляя их в очередь RabbitMQ.
2. **Consumer** извлекает ссылки из очереди, обрабатывает каждую из них и повторно добавляет новые ссылки в очередь.
3. Consumer прекращает работу, если в течение указанного времени (`TIMEOUT`) в очереди не появляются новые сообщения.

## Логирование

- Все события записываются в файл `app.log` и выводятся в консоль.
- Обработанные ссылки сохраняются в файле `processed_links.txt`, чтобы избежать дублирования.

